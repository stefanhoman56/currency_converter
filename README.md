# Python Engineer Task

## Task Description

The mid-market rate (sometimes called the interbank or middle rate) is the midpoint between the buy and sell prices of any two currencies at any time. And as the buy and sell rates are based on the constantly changing demand for and supply of a currency, the mid-market rate is constantly changing too.
Your task is to develop a mid-market currency converter API using FastAPI. This API will have the following endpoints:

- /convert
- /currencies
- /history

## Project Setup using Docker

Run following command

```sh
make docker/build
```

Copy to `env.example` to `local.env` file and edit environment variables.

```sh
make docker/run
```

## [API Document](localhost:5000/api/docs)

## Running DB Migrations

Following is the common sequence of actions you would perform to create & run migrations in the database during local development.

- Add/Remove or Make changes to the table schemas in `src/db/models` folder. Use `SQLAlchemy ORM` to define the models.

- Attach a shell to the docker container

  ```
  docker exec -it <container-id> sh
  ```

- Once inside the container, `cd src/db` to get into the directory that contains the `alembic.ini` file

- Here, you can run `alembic` commands to auto-generate the migration

  ```
  alembic revision --autogenerate -m "<migration name>"
  ```

- This will create a migration file that has upgrade and downgrade commands. Check it thoroughly. **NEVER EVER RUN AN AUTOGENERATED MIGRATION WITHOUT CHECKING**.

- Run migrations

  ```
  alembic upgrade head
  ```

  Pending migrations are automatically applied when you spin up the container next time after closing/exiting. This is done to make the multi-person developer experience smoother.
